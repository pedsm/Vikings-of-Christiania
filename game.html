<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Vikings of Christiania</title>
    <script src="p5.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/1.7.3/socket.io.min.js"></script>
    <link rel="stylesheet" type="text/css" href="login.css">
    <link rel="stylesheet" type="text/css" href="style.css">

    <body style="margin:0px;">
        <div id="container" class="container">
            <img class="logo" src="logo.png" />
            <form id="login-form">
                <input id="nameInput" type="text" placeholder="Enter Name" name="name">
                <div>
                    <button type="submit">Play!</button>
                </div>
            </form>
        </div>
        <script src="sketch.js"/></script>
        <script>
            var socket = io();
            var form = document.getElementById("login-form");
            form.onsubmit = function () {
                var playername = document.getElementById("nameInput").value;
                socket.emit('join_game', {name: playername});
                console.log("Joining game!");

                // Remove form
                document.getElementsByClassName("container")[0].remove();
                loop();
                return false;
            }

            console.log("connected to ws")
            socket.on('gamestate', (remoteGamestate) => {
                gameState = remoteGamestate;
                gameState.players = gameState.players.filter((p) => p.id != socket.id);
            })
        </script>

    </body>

</html>
